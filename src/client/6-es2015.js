(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"4TXq":function(e,t,n){var a,r;a=[n,t,n("ofXK"),n("mpgD"),n("1ATV"),n("3Pt+"),n("kt0X"),n("S7BQ"),n("snw9"),n("cT7G"),n("cYii"),n("fXoL"),n("kt0X"),n("snw9")],void 0===(r=(function(e,t,n,a,r,i,o,s,c,l,d,u,p,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class g{}t.CreateModule=g,g.\u0275mod=u.\u0275\u0275defineNgModule({type:g}),g.\u0275inj=u.\u0275\u0275defineInjector({factory:function(e){return new(e||g)},providers:[d.CreateChartService],imports:[[i.FormsModule,r.L10nTranslationModule,n.CommonModule,a.CreateRoutingModule,o.StoreModule.forFeature(s.featureKey,s.reducer),c.EffectsModule.forFeature([l.CreateEffects])]]})}).apply(t,a))||(e.exports=r)},DGTN:function(e,t,n){var a,r;a=[n,t,n("kt0X")],void 0===(r=(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadDataSource=n.createAction("[Create] Load data source",n.props()),t.LoadDataSourceSuccess=n.createAction("[Create] Load data source success",n.props()),t.LoadDataSourceFailure=n.createAction("[Create] Load data source failure"),t.SaveSqlDataSource=n.createAction("[Create] Save SQL data source",n.props()),t.SaveSqlDataSourceSuccess=n.createAction("[Create] Save SQL data source success",n.props()),t.SaveSqlDataSourceFailure=n.createAction("[Create] Save SQL data source failure"),t.TestSqlConnection=n.createAction("[Create] Test sql connection",n.props()),t.TestSqlConnectionSuccess=n.createAction("[Create] Test sql connection success"),t.TestSqlConnectionFailure=n.createAction("[Create] Test sql connection failure"),t.ResetSaveStatus=n.createAction("[Create] Reset save status"),t.CreateChart=n.createAction("[Create] Create chart",n.props()),t.CreateChartSuccess=n.createAction("[Create] Create chart success",n.props()),t.CreateChartFailure=n.createAction("[Create] Create chart failure")}).apply(t,a))||(e.exports=r)},RPw7:function(e,t,n){var a;void 0===(a=(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.waadSourceDisabled={title:"CreateChartStrings.TXT.SourceTitleAD",desc:"CreateChartStrings.TXT.SourceDescAD",imageUrl:"/Images/ux/dataSources/WAAD.png",warning:"CreateChartStrings.ADWarning",warningLink:"/Tenant/SimpleConsent",errorLink:"/website/guides/aad-offline-error.cshtml",isEnabled:!1,type:5},t.waadSource={title:"CreateChartStrings.TXT.SourceTitleAD",desc:"CreateChartStrings.TXT.SourceDescAD",imageUrl:"/Images/ux/dataSources/WAAD.png",guideLink:"/website/guides/creating-from-aad.cshtml",guideLinkText:"View our Getting Started guide for Azure Active Directory",isEnabled:!0,type:5},t.upsSourceDisabled={title:"CreateChartStrings.TXT.SourceTitleUPS",desc:"CreateChartStrings.TXT.SourceDescUPS",imageUrl:"/Images/ux/dataSources/SharePointUPS.png",isSharePointWarning:!0,errorLink:"/website/guides/sharepoint-offline-error.cshtml",errorText:"Why am I seeing this error message and how do I resolve it?",isEnabled:!1,type:7},t.upsSource={title:"CreateChartStrings.TXT.SourceTitleUPS",desc:"CreateChartStrings.TXT.SourceDescUPS",imageUrl:"/Images/ux/dataSources/SharePointUPS.png",guideLink:"/website/guides/creating-from-ups.cshtml",guideLinkText:"View our Getting Started guide for SharePoint User Profile Service",isEnabled:!0,type:7},t.spListSourceDisabled={title:"CreateChartStrings.TXT.SourceTitleSPList",desc:"CreateChartStrings.TXT.SourceDescSPList",imageUrl:"/Images/ux/dataSources/SharePointList.png",isSharePointWarning:!0,errorLink:"/website/guides/sharepoint-offline-error.cshtml",errorText:"Why am I seeing this error message and how do I resolve it?",isEnabled:!1,type:6},t.spListSource={title:"CreateChartStrings.TXT.SourceTitleSPList",desc:"CreateChartStrings.TXT.SourceDescSPList",imageUrl:"/Images/ux/dataSources/SharePointList.png",guideLink:"/website/guides/creating-from-sharepoint-list.cshtml",guideLinkText:"View our Getting Started guide for SharePoint List",isEnabled:!0,type:6},t.sqlSource={title:"CreateChartStrings.TXT.SourceTitleSQL",desc:"CreateChartStrings.TXT.SourceDescSQL",imageUrl:"/Images/ux/dataSources/SQLServer.png",guideLink:"/website/guides/creating-from-database.cshtml",guideLinkText:"View our Getting Started guide for the SQL server data source",isEnabled:!0,type:2},t.excelSource={title:"CreateChartStrings.TXT.SourceTitleExcel",desc:"CreateChartStrings.TXT.SourceDescExcel",imageUrl:"/Images/ux/dataSources/Excel.png",isEnabled:!0,type:13},t.manualSource={title:"CreateChartStrings.TXT.SourceTitleManual",desc:"CreateChartStrings.TXT.SourceDescManual",imageUrl:"/Images/ux/dataSources/manualChart.png",guideLink:"/website/guides/manually-drawing-an-orgchart.cshtml",guideLinkText:"View our Getting Started guide for the Manual data source",isEnabled:!0,type:13},t.azureTableSource={title:"Azure Table",desc:"Create chart from Azure Table Storage",imageUrl:"/Images/ux/dataSources/AzureTable.png",guideLink:"/website/guides/creating-an-orgchart-from-azuretable.cshtml",guideLinkText:"View our guide for the Azure Table source",isEnabled:!0,type:12},t.demoSource={title:"CreateChartStrings.TXT.SourceTitleDemo",desc:"CreateChartStrings.TXT.SourceDescDemo",imageUrl:"/Images/ux/dataSources/demochart.png",isEnabled:!0,type:8}}).apply(t,[n,t]))||(e.exports=a)},S7BQ:function(e,t,n){var a,r;a=[n,t,n("kt0X"),n("DGTN")],void 0===(r=(function(e,t,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.featureKey="create",t.initialState={dataSource:null,isTestingConnection:!1,hasConnectionTestFailed:!1,hasConnectionTestSucceeded:!1,saveSqlSourceSuccess:!1,createdChart:null,isCreating:!1};const r=n.createReducer(t.initialState,n.on(a.LoadDataSourceSuccess,(e,t)=>Object.assign(Object.assign({},e),{dataSource:t.dataSource,hasConnectionTestFailed:!1,hasConnectionTestSucceeded:!1})),n.on(a.TestSqlConnection,e=>Object.assign(Object.assign({},e),{isTestingConnection:!0})),n.on(a.TestSqlConnectionSuccess,e=>Object.assign(Object.assign({},e),{isTestingConnection:!0,hasConnectionTestFailed:!1,hasConnectionTestSucceeded:!0})),n.on(a.TestSqlConnectionFailure,e=>Object.assign(Object.assign({},e),{isTestingConnection:!0,hasConnectionTestFailed:!0,hasConnectionTestSucceeded:!1})),n.on(a.SaveSqlDataSourceSuccess,e=>Object.assign(Object.assign({},e),{saveSqlSourceSuccess:!0})),n.on(a.CreateChart,e=>Object.assign(Object.assign({},e),{isCreating:!0})),n.on(a.CreateChartSuccess,(e,t)=>Object.assign(Object.assign({},e),{createdChart:t})),n.on(a.CreateChartFailure,e=>Object.assign(Object.assign({},e),{isCreating:!1})),n.on(a.ResetSaveStatus,e=>Object.assign(Object.assign({},e),{saveSqlSourceSuccess:!1,createdChart:null,isCreating:!1})));t.reducer=function(e,t){return r(e,t)},t.selectCreate=n.createFeatureSelector(t.featureKey),t.selectIsTestingConnection=n.createSelector(t.selectCreate,e=>e.isTestingConnection),t.selectDataSource=n.createSelector(t.selectCreate,e=>e.dataSource),t.selectHasConnectionTestFailed=n.createSelector(t.selectCreate,e=>e.hasConnectionTestFailed),t.selectHasConnectionTestSucceeded=n.createSelector(t.selectCreate,e=>e.hasConnectionTestSucceeded),t.selectSaveSqlSourceSuccess=n.createSelector(t.selectCreate,e=>e.saveSqlSourceSuccess),t.selectCreatedChart=n.createSelector(t.selectCreate,e=>e.createdChart),t.selectIsCreating=n.createSelector(t.selectCreate,e=>e.isCreating)}).apply(t,a))||(e.exports=r)},cT7G:function(e,t,n){var a,r;a=[n,t,n("snw9"),n("qCKp"),n("kU1M"),n("cYii"),n("DGTN"),n("DIoI"),n("fXoL"),n("snw9"),n("cYii")],void 0===(r=(function(e,t,n,a,r,i,o,s,c,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class u{constructor(e,t){this.actions$=e,this.createChartService=t,this.createChart$=n.createEffect(()=>this.actions$.pipe(n.ofType(o.CreateChart),r.switchMap(e=>this.createChartService.createChart(e.model).pipe(r.map(e=>o.CreateChartSuccess(e)))),r.catchError(e=>a.of(o.CreateChartFailure())))),this.loadDataSource$=n.createEffect(()=>this.actions$.pipe(n.ofType(o.LoadDataSource),r.switchMap(e=>this.createChartService.getDataSource(e.chartId).pipe(r.map(e=>o.LoadDataSourceSuccess({dataSource:e})))),r.catchError(e=>a.of(o.LoadDataSourceFailure())))),this.saveSqlDataSource$=n.createEffect(()=>this.actions$.pipe(n.ofType(o.SaveSqlDataSource),r.switchMap(e=>this.createChartService.saveSqlDataSource(e.chartId,e.dataSource).pipe(r.mergeMap(e=>[o.SaveSqlDataSourceSuccess({dataSource:e}),new s.ToastSuccess("Data source saved.")]))),r.catchError(e=>a.of(o.SaveSqlDataSourceFailure()).pipe(r.mergeMap(e=>[e,new s.ToastError("Could not save data source.")]))))),this.testSqlConnnection$=n.createEffect(()=>this.actions$.pipe(n.ofType(o.TestSqlConnection),r.switchMap(e=>this.createChartService.testSqlConnection(e.dataSource).pipe(r.mergeMap(e=>"OK"===e?[o.TestSqlConnectionSuccess(),new s.ToastSuccess("Connection test succeeded.")]:[o.TestSqlConnectionFailure(),new s.ToastError("Connection test failed.")]))),r.catchError(e=>a.of(o.TestSqlConnectionFailure()).pipe(r.mergeMap(e=>[e,new s.ToastError("Connection test failed on the server.")])))))}}t.CreateEffects=u,u.\u0275fac=function(e){return new(e||u)(c.\u0275\u0275inject(l.Actions),c.\u0275\u0275inject(d.CreateChartService))},u.\u0275prov=c.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac})}).apply(t,a))||(e.exports=r)},cYii:function(e,t,n){var a,r;a=[n,t,n("tk/3"),n("fXoL"),n("tk/3")],void 0===(r=(function(e,t,n,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e){this.http=e}createChart(e){return this.http.post("/api/create/chart",e)}getDataSource(e){return this.http.get(`/api/create/sql/${e}`)}saveSqlDataSource(e,t){return this.http.post(`/api/create/sql/${e}`,t)}testSqlConnection(e){return this.http.post("/api/testconnection",e)}}t.CreateChartService=i,i.\u0275fac=function(e){return new(e||i)(a.\u0275\u0275inject(r.HttpClient))},i.\u0275prov=a.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}).apply(t,a))||(e.exports=r)},mpgD:function(e,t,n){var a,r;a=[n,t,n("tyNb"),n("vmo7"),n("qx2U"),n("fXoL"),n("tyNb")],void 0===(r=(function(e,t,n,a,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=[{path:"",component:a.CreateChartComponent},{path:"sql/:chartId",component:r.SqlSourceComponent}];class c{}t.CreateRoutingModule=c,c.\u0275mod=i.\u0275\u0275defineNgModule({type:c}),c.\u0275inj=i.\u0275\u0275defineInjector({factory:function(e){return new(e||c)},imports:[[n.RouterModule.forChild(s)],n.RouterModule]})}).apply(t,a))||(e.exports=r)},qx2U:function(e,t,n){var a,r;a=[n,t,n("qCKp"),n("1ATV"),n("IGZg"),n("Z2nh"),n("S7BQ"),n("kt0X"),n("kU1M"),n("DGTN"),n("tyNb"),n("fXoL"),n("kt0X"),n("tyNb"),n("3Pt+"),n("ofXK"),n("1ATV")],void 0===(r=(function(e,t,n,a,r,i,o,s,c,l,d,u,p,S,g,h,m){"use strict";function C(e,t){1&e&&u.\u0275\u0275element(0,"div",21)}function f(e,t){if(1&e&&(u.\u0275\u0275elementStart(0,"div",22),u.\u0275\u0275text(1),u.\u0275\u0275pipe(2,"translate"),u.\u0275\u0275elementEnd()),2&e){const e=u.\u0275\u0275nextContext();u.\u0275\u0275advance(1),u.\u0275\u0275textInterpolate1(" ",u.\u0275\u0275pipeBind2(2,1,e.Resources.CreateChartStrings.SQL.ConnectionSuccess,e.locale.language)," ")}}Object.defineProperty(t,"__esModule",{value:!0});const v=function(e,t,n,a){return{"btn-info":e,"btn-danger":t,"btn-success":n,disabled:a}};class T{constructor(e,t,a){this.locale=e,this.store=t,this.router=a,this.Resources=i,this.model={ConnectionString:"",ParentColumn:"",PrimaryKeyColumn:"",SearchQuery:"",SelectQuery:""},this.connectionFail=!1,this.connectionSuccess=!1,this.unsubscribe=new n.Subject,this.chartId$=this.store.pipe(s.select(r.getChartId)),this.chartId$.pipe(c.takeUntil(this.unsubscribe),c.filter(e=>""!==e)).subscribe(e=>{t.dispatch(l.LoadDataSource({chartId:e})),this.chartId=e}),this.dataSource$=this.store.pipe(s.select(o.selectDataSource)),this.dataSource$.pipe(c.takeUntil(this.unsubscribe)).subscribe(e=>{this.model=Object.assign({},e)}),this.hasConnectionTestFailed$=this.store.pipe(s.select(o.selectHasConnectionTestFailed)),this.hasConnectionTestSucceeded$=this.store.pipe(s.select(o.selectHasConnectionTestSucceeded)),this.store.pipe(s.select(o.selectSaveSqlSourceSuccess),c.takeUntil(this.unsubscribe),c.filter(e=>e),c.withLatestFrom(this.chartId$)).subscribe(([e,t])=>{this.router.navigate(["/chart",t]),this.store.dispatch(l.ResetSaveStatus())})}ngOnInit(){}testConnection(){this.store.dispatch(l.TestSqlConnection({dataSource:this.model}))}save(){this.store.dispatch(l.SaveSqlDataSource({chartId:this.chartId,dataSource:this.model}))}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}}t.SqlSourceComponent=T,T.\u0275fac=function(e){return new(e||T)(u.\u0275\u0275directiveInject(a.L10N_LOCALE),u.\u0275\u0275directiveInject(p.Store),u.\u0275\u0275directiveInject(S.Router))},T.\u0275cmp=u.\u0275\u0275defineComponent({type:T,selectors:[["toc-sql-source"]],decls:61,vars:61,consts:[[1,"container"],["name","sqlForm","novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"card"],[1,"section-heading"],[1,"suffix"],[1,"row","horizontal-form"],[1,"col-3"],[1,"col-9"],["type","text","required","","name","connectionString",1,"form-control",3,"ngModel","ngModelChange"],["type","text","required","","name","selectQuery",1,"form-control",3,"ngModel","ngModelChange"],["type","text","required","","name","primaryKey",1,"form-control",3,"ngModel","ngModelChange"],["type","text","required","","name","parentKey",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","searchQuery",1,"form-control",3,"ngModel","ngModelChange"],["class","form-group hidden alert alert-danger",4,"ngIf"],["class","form-group hidden alert alert-success",4,"ngIf"],[1,"row","pull-right"],[1,"col-12"],["type","submit",1,"btn",3,"ngClass","click"],["type","submit",1,"btn","btn-success"],[1,"clearfix"],[1,"form-group","hidden","alert","alert-danger"],[1,"form-group","hidden","alert","alert-success"]],template:function(e,t){if(1&e){const e=u.\u0275\u0275getCurrentView();u.\u0275\u0275elementStart(0,"div",0),u.\u0275\u0275elementStart(1,"form",1,2),u.\u0275\u0275listener("ngSubmit",(function(n){return u.\u0275\u0275restoreView(e),u.\u0275\u0275reference(2).form.valid&&t.save()})),u.\u0275\u0275elementStart(3,"div",3),u.\u0275\u0275elementStart(4,"div",4),u.\u0275\u0275text(5),u.\u0275\u0275pipe(6,"translate"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(7,"div",5),u.\u0275\u0275text(8),u.\u0275\u0275pipe(9,"translate"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(10,"div",6),u.\u0275\u0275elementStart(11,"div",7),u.\u0275\u0275elementStart(12,"label"),u.\u0275\u0275text(13),u.\u0275\u0275pipe(14,"translate"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(15,"div",8),u.\u0275\u0275elementStart(16,"input",9),u.\u0275\u0275listener("ngModelChange",(function(e){return t.model.ConnectionString=e})),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(17,"div",6),u.\u0275\u0275elementStart(18,"div",7),u.\u0275\u0275elementStart(19,"label"),u.\u0275\u0275text(20),u.\u0275\u0275pipe(21,"translate"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(22,"div",8),u.\u0275\u0275elementStart(23,"input",10),u.\u0275\u0275listener("ngModelChange",(function(e){return t.model.SelectQuery=e})),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(24,"div",6),u.\u0275\u0275elementStart(25,"div",7),u.\u0275\u0275elementStart(26,"label"),u.\u0275\u0275text(27),u.\u0275\u0275pipe(28,"translate"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(29,"div",8),u.\u0275\u0275elementStart(30,"input",11),u.\u0275\u0275listener("ngModelChange",(function(e){return t.model.PrimaryKeyColumn=e})),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(31,"div",6),u.\u0275\u0275elementStart(32,"div",7),u.\u0275\u0275elementStart(33,"label"),u.\u0275\u0275text(34),u.\u0275\u0275pipe(35,"translate"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(36,"div",8),u.\u0275\u0275elementStart(37,"input",12),u.\u0275\u0275listener("ngModelChange",(function(e){return t.model.ParentColumn=e})),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(38,"div",6),u.\u0275\u0275elementStart(39,"div",7),u.\u0275\u0275elementStart(40,"label"),u.\u0275\u0275text(41),u.\u0275\u0275pipe(42,"translate"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(43,"div",8),u.\u0275\u0275elementStart(44,"input",13),u.\u0275\u0275listener("ngModelChange",(function(e){return t.model.SearchQuery=e})),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275template(45,C,1,0,"div",14),u.\u0275\u0275template(46,f,3,4,"div",15),u.\u0275\u0275elementStart(47,"div",16),u.\u0275\u0275elementStart(48,"div",17),u.\u0275\u0275elementStart(49,"button",18),u.\u0275\u0275listener("click",(function(e){return t.testConnection()})),u.\u0275\u0275pipe(50,"async"),u.\u0275\u0275pipe(51,"async"),u.\u0275\u0275pipe(52,"async"),u.\u0275\u0275pipe(53,"async"),u.\u0275\u0275pipe(54,"async"),u.\u0275\u0275text(55),u.\u0275\u0275pipe(56,"translate"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(57,"button",19),u.\u0275\u0275text(58),u.\u0275\u0275pipe(59,"translate"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275element(60,"div",20),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd()}if(2&e){const e=u.\u0275\u0275reference(2);u.\u0275\u0275advance(1),u.\u0275\u0275classProp("submitted",e.submitted),u.\u0275\u0275advance(4),u.\u0275\u0275textInterpolate(u.\u0275\u0275pipeBind2(6,19,t.Resources.CreateChartStrings.SQL.Title2,t.locale.language)),u.\u0275\u0275advance(3),u.\u0275\u0275textInterpolate(u.\u0275\u0275pipeBind2(9,22,t.Resources.CreateChartStrings.SQL.TitleDesc,t.locale.language)),u.\u0275\u0275advance(5),u.\u0275\u0275textInterpolate(u.\u0275\u0275pipeBind2(14,25,t.Resources.Strings.TXT.ConnectionString,t.locale.language)),u.\u0275\u0275advance(3),u.\u0275\u0275property("ngModel",t.model.ConnectionString),u.\u0275\u0275advance(4),u.\u0275\u0275textInterpolate(u.\u0275\u0275pipeBind2(21,28,t.Resources.Strings.TXT.SELECTquery,t.locale.language)),u.\u0275\u0275advance(3),u.\u0275\u0275property("ngModel",t.model.SelectQuery),u.\u0275\u0275advance(4),u.\u0275\u0275textInterpolate(u.\u0275\u0275pipeBind2(28,31,t.Resources.Strings.TXT.PrimaryKeyColumn,t.locale.language)),u.\u0275\u0275advance(3),u.\u0275\u0275property("ngModel",t.model.PrimaryKeyColumn),u.\u0275\u0275advance(4),u.\u0275\u0275textInterpolate(u.\u0275\u0275pipeBind2(35,34,t.Resources.Strings.TXT.ParentColumn,t.locale.language)),u.\u0275\u0275advance(3),u.\u0275\u0275property("ngModel",t.model.ParentColumn),u.\u0275\u0275advance(4),u.\u0275\u0275textInterpolate(u.\u0275\u0275pipeBind2(42,37,t.Resources.Strings.TXT.SearchQuery,t.locale.language)),u.\u0275\u0275advance(3),u.\u0275\u0275property("ngModel",t.model.SearchQuery),u.\u0275\u0275advance(1),u.\u0275\u0275property("ngIf",t.connectionFail),u.\u0275\u0275advance(1),u.\u0275\u0275property("ngIf",t.connectionSuccess),u.\u0275\u0275advance(3),u.\u0275\u0275property("ngClass",u.\u0275\u0275pureFunction4(56,v,!u.\u0275\u0275pipeBind1(50,40,t.hasConnectionTestFailed$)&&!u.\u0275\u0275pipeBind1(51,42,t.hasConnectionTestSucceeded$),u.\u0275\u0275pipeBind1(52,44,t.hasConnectionTestFailed$),u.\u0275\u0275pipeBind1(53,46,t.hasConnectionTestSucceeded$),u.\u0275\u0275pipeBind1(54,48,t.isTestingConnection$))),u.\u0275\u0275advance(6),u.\u0275\u0275textInterpolate(u.\u0275\u0275pipeBind2(56,50,t.Resources.CreateChartStrings.SQL.TestConnection,t.locale.language)),u.\u0275\u0275advance(3),u.\u0275\u0275textInterpolate(u.\u0275\u0275pipeBind2(59,53,t.Resources.Strings.BUTTON.SAVE,t.locale.language))}},directives:[g.\u0275angular_packages_forms_forms_y,g.NgControlStatusGroup,g.NgForm,g.DefaultValueAccessor,g.RequiredValidator,g.NgControlStatus,g.NgModel,h.NgIf,h.NgClass],pipes:[m.L10nTranslatePipe,h.AsyncPipe],styles:["form.submitted[_ngcontent-%COMP%]   .ng-valid.required[_ngcontent-%COMP%], form.submitted[_ngcontent-%COMP%]   .ng-valid[required][_ngcontent-%COMP%]{border-left:5px solid #42a948}form.submitted[_ngcontent-%COMP%]   .ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}.ng-invalid[_ngcontent-%COMP%]:not(form){border:1px solid #ccc}.ng-invalid.ng-touched[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}"]})}).apply(t,a))||(e.exports=r)},vmo7:function(e,t,n){var a,r;a=[n,t,n("kt0X"),n("qCKp"),n("IGZg"),n("S7BQ"),n("Z2nh"),n("RPw7"),n("kU1M"),n("DGTN"),n("tyNb"),n("DIoI"),n("wdty"),n("8oAO"),n("1ATV"),n("fXoL"),n("kt0X"),n("1ATV"),n("tyNb"),n("8oAO"),n("3Pt+"),n("ofXK")],void 0===(r=(function(e,t,n,a,r,i,o,s,c,l,d,u,p,S,g,h,m,C,f,v,T,b){"use strict";function x(e,t){if(1&e&&(h.\u0275\u0275elementStart(0,"span"),h.\u0275\u0275text(1),h.\u0275\u0275pipe(2,"translate"),h.\u0275\u0275elementEnd()),2&e){const e=h.\u0275\u0275nextContext(2);h.\u0275\u0275advance(1),h.\u0275\u0275textInterpolate1(" ",h.\u0275\u0275pipeBind2(2,1,e.Resources.CreateChartStrings.TXT.NotEnabled,e.locale.language),"")}}function y(e,t){if(1&e&&(h.\u0275\u0275elementStart(0,"div",28),h.\u0275\u0275text(1),h.\u0275\u0275pipe(2,"translate"),h.\u0275\u0275elementEnd()),2&e){const e=h.\u0275\u0275nextContext().$implicit,t=h.\u0275\u0275nextContext();h.\u0275\u0275advance(1),h.\u0275\u0275textInterpolate1(" ",h.\u0275\u0275pipeBind2(2,1,e.desc,t.locale.language),"")}}function E(e,t){if(1&e&&(h.\u0275\u0275elementStart(0,"div",29),h.\u0275\u0275elementStart(1,"a",30),h.\u0275\u0275element(2,"i",31),h.\u0275\u0275text(3),h.\u0275\u0275pipe(4,"translate"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementEnd()),2&e){const e=h.\u0275\u0275nextContext().$implicit,t=h.\u0275\u0275nextContext();h.\u0275\u0275advance(1),h.\u0275\u0275property("href",e.warningLink,h.\u0275\u0275sanitizeUrl),h.\u0275\u0275advance(2),h.\u0275\u0275textInterpolate1(" ",h.\u0275\u0275pipeBind2(4,2,e.warning,t.locale.language),"")}}function I(e,t){if(1&e&&(h.\u0275\u0275elementStart(0,"a",30),h.\u0275\u0275element(1,"i",31),h.\u0275\u0275text(2),h.\u0275\u0275pipe(3,"translate"),h.\u0275\u0275elementEnd()),2&e){const e=h.\u0275\u0275nextContext(3);h.\u0275\u0275property("href",null==e.preloadedData?null:e.preloadedData.sharePointRedirectLink,h.\u0275\u0275sanitizeUrl),h.\u0275\u0275advance(2),h.\u0275\u0275textInterpolate1(" ",h.\u0275\u0275pipeBind2(3,2,e.Resources.CreateChartStrings.SPWarning,e.locale.language),"")}}function w(e,t){if(1&e&&(h.\u0275\u0275elementStart(0,"span",35),h.\u0275\u0275element(1,"i",31),h.\u0275\u0275text(2),h.\u0275\u0275pipe(3,"translate"),h.\u0275\u0275elementEnd()),2&e){const e=h.\u0275\u0275nextContext(3);h.\u0275\u0275advance(2),h.\u0275\u0275textInterpolate1(" ",h.\u0275\u0275pipeBind2(3,1,e.Resources.CreateChartStrings.SPWarning,e.locale.language)," ")}}function M(e,t){if(1&e&&(h.\u0275\u0275elementStart(0,"div",32),h.\u0275\u0275template(1,I,4,5,"a",33),h.\u0275\u0275template(2,w,4,4,"span",34),h.\u0275\u0275elementEnd()),2&e){const e=h.\u0275\u0275nextContext(2);h.\u0275\u0275advance(1),h.\u0275\u0275property("ngIf",null==e.preloadedData?null:e.preloadedData.sharePointRedirectLink),h.\u0275\u0275advance(1),h.\u0275\u0275property("ngIf",!(null!=e.preloadedData&&e.preloadedData.sharePointRedirectLink))}}function D(e,t){if(1&e&&(h.\u0275\u0275elementStart(0,"p"),h.\u0275\u0275element(1,"i",36),h.\u0275\u0275elementStart(2,"a",37),h.\u0275\u0275text(3),h.\u0275\u0275pipe(4,"translate"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementEnd()),2&e){const e=h.\u0275\u0275nextContext().$implicit,t=h.\u0275\u0275nextContext();h.\u0275\u0275advance(2),h.\u0275\u0275property("href",e.errorLink,h.\u0275\u0275sanitizeUrl),h.\u0275\u0275advance(1),h.\u0275\u0275textInterpolate1(" ",h.\u0275\u0275pipeBind2(4,2,t.Resources.CreateChartStrings.TXT.WhyAmISeeing,t.locale.language)," ")}}function L(e,t){if(1&e&&(h.\u0275\u0275elementStart(0,"p"),h.\u0275\u0275element(1,"i",38),h.\u0275\u0275elementStart(2,"a",37),h.\u0275\u0275text(3),h.\u0275\u0275pipe(4,"translate"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementEnd()),2&e){const e=h.\u0275\u0275nextContext().$implicit,t=h.\u0275\u0275nextContext();h.\u0275\u0275advance(2),h.\u0275\u0275property("href",e.guideLink,h.\u0275\u0275sanitizeUrl),h.\u0275\u0275advance(1),h.\u0275\u0275textInterpolate1(" ",h.\u0275\u0275pipeBind2(4,2,e.guideLinkText,t.locale.language)," ")}}function k(e,t){if(1&e){const e=h.\u0275\u0275getCurrentView();h.\u0275\u0275elementStart(0,"div",14),h.\u0275\u0275listener("mouseenter",(function(n){h.\u0275\u0275restoreView(e);const a=t.index;return h.\u0275\u0275nextContext().onMouseEnter(n,a)}))("mouseleave",(function(t){return h.\u0275\u0275restoreView(e),h.\u0275\u0275nextContext().onMouseLeave()})),h.\u0275\u0275elementStart(1,"div",15),h.\u0275\u0275elementStart(2,"div",16),h.\u0275\u0275elementStart(3,"div",17),h.\u0275\u0275element(4,"img",18),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(5,"div",19),h.\u0275\u0275elementStart(6,"div",20),h.\u0275\u0275elementStart(7,"div",21),h.\u0275\u0275text(8),h.\u0275\u0275pipe(9,"translate"),h.\u0275\u0275template(10,x,3,4,"span",22),h.\u0275\u0275elementEnd(),h.\u0275\u0275template(11,y,3,4,"div",23),h.\u0275\u0275template(12,E,5,5,"div",24),h.\u0275\u0275template(13,M,3,2,"div",25),h.\u0275\u0275template(14,D,5,5,"p",22),h.\u0275\u0275template(15,L,5,5,"p",22),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(16,"div",26),h.\u0275\u0275elementStart(17,"button",27),h.\u0275\u0275listener("click",(function(n){h.\u0275\u0275restoreView(e);const a=t.$implicit;return h.\u0275\u0275nextContext().createChart(a.type)})),h.\u0275\u0275pipe(18,"async"),h.\u0275\u0275text(19),h.\u0275\u0275pipe(20,"translate"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=t.index,a=h.\u0275\u0275nextContext();h.\u0275\u0275classProp("disabled",!e.isEnabled)("active",e.isEnabled)("inactive",a.dataSourcesHighlight[n]),h.\u0275\u0275advance(4),h.\u0275\u0275property("src",e.imageUrl,h.\u0275\u0275sanitizeUrl),h.\u0275\u0275advance(4),h.\u0275\u0275textInterpolate(h.\u0275\u0275pipeBind2(9,20,e.title,a.locale.language)),h.\u0275\u0275advance(2),h.\u0275\u0275property("ngIf",!e.isEnabled),h.\u0275\u0275advance(1),h.\u0275\u0275property("ngIf",!e.warning&&!e.isSharePointWarning),h.\u0275\u0275advance(1),h.\u0275\u0275property("ngIf",e.warning),h.\u0275\u0275advance(1),h.\u0275\u0275property("ngIf",e.isSharePointWarning),h.\u0275\u0275advance(1),h.\u0275\u0275property("ngIf",e.errorLink),h.\u0275\u0275advance(1),h.\u0275\u0275property("ngIf",e.guideLink),h.\u0275\u0275advance(2),h.\u0275\u0275classProp("btn-success",e.isEnabled)("btn-default",!e.isEnabled),h.\u0275\u0275property("disabled",!e.isEnabled||h.\u0275\u0275pipeBind1(18,23,a.isCreating$)),h.\u0275\u0275advance(2),h.\u0275\u0275textInterpolate1("",h.\u0275\u0275pipeBind2(20,25,a.Resources.CreateChartStrings.BTN.ChooseThisSource,a.locale.language)," \xbb")}}Object.defineProperty(t,"__esModule",{value:!0});class P{constructor(e,t,d,S,g){this.locale=e,this.store=t,this.translation=d,this.router=S,this.analytics=g,this.Resources=o,this.dataSources=[],this.dataSourcesHighlight=[],this.createChartModel={placeholder:"",isPublic:!0,name:""},this.placeholderName="Chart #{0}",this.unsubscribe=new a.Subject,this.analytics.send("Create chart",{}),a.combineLatest([this.translation.onChange(),this.store.select(r.getPreloadedData)]).pipe(c.takeUntil(this.unsubscribe)).subscribe(([e,t])=>{this.placeholderName=this.translation.translate(o.CreateChartStrings.TXT.ChartNamePlaceholder),this.preloadedData=t;const n=[s.sqlSource,s.excelSource,s.manualSource,s.azureTableSource,s.demoSource];this.preloadedData.isSharePointOnline?(n.unshift(s.spListSource),n.unshift(s.upsSource)):(n.unshift(s.spListSourceDisabled),n.unshift(s.upsSourceDisabled)),n.unshift(this.preloadedData.isWAADTenant?s.waadSource:s.waadSourceDisabled),this.dataSources=n,this.dataSourcesHighlight=this.dataSources.map(e=>!1);for(let a=1;a<256;a++){const e=this.placeholderName.replace("{0}",String(a));if(-1===this.preloadedData.fullChartList.findIndex(t=>t.name===e)){this.createChartModel=Object.assign(Object.assign({},this.createChartModel),{placeholder:e});break}}}),this.store.pipe(c.takeUntil(this.unsubscribe),n.select(i.selectCreatedChart),c.filter(e=>null!==e)).subscribe(e=>{switch(this.store.dispatch(new p.InsertChartDescription(e)),e.dataSourceType){case 13:this.router.navigateByUrl(`/chart/${e.id}?EditMode=1`);break;case 2:this.router.navigate(["/create/sql",e.id]);break;case 5:window.location.href=`/PickTop/${e.id}?create=create`;break;case 6:window.location.href=`/sharepointlist/${e.id}`;break;case 7:window.location.href=`/PickTop/${e.id}?create=create`;break;case 8:this.router.navigate(["/chart",e.id]);break;case 12:window.location.href=`/CreateChart/AzureTable?OrgChartDefinitionId=${e.id}`;break;default:this.store.dispatch(new u.ToastError("Unknown data source type"))}this.store.dispatch(l.ResetSaveStatus())}),this.isCreating$=t.pipe(n.select(i.selectIsCreating))}ngOnInit(){console.log("on init"),this.store.dispatch(l.ResetSaveStatus())}createChart(e){this.store.dispatch(l.CreateChart({model:{ChartName:this.createChartModel.name||this.createChartModel.placeholder,IsPublic:this.createChartModel.isPublic,DataSourceType:e}}))}onMouseEnter(e,t){this.dataSourcesHighlight=this.dataSources.map((e,n)=>n!==t)}onMouseLeave(){this.dataSourcesHighlight=this.dataSources.map(e=>!1)}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}}t.CreateChartComponent=P,P.\u0275fac=function(e){return new(e||P)(h.\u0275\u0275directiveInject(g.L10N_LOCALE),h.\u0275\u0275directiveInject(m.Store),h.\u0275\u0275directiveInject(C.L10nTranslationService),h.\u0275\u0275directiveInject(f.Router),h.\u0275\u0275directiveInject(v.AnalyticsService))},P.\u0275cmp=h.\u0275\u0275defineComponent({type:P,selectors:[["toc-create-chart"]],decls:37,vars:38,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"card"],[1,"section-heading"],[1,"suffix"],[1,"form-group"],["type","text","autocomplete","off",1,"form-control",3,"disabled","ngModel","placeholder","ngModelChange"],[1,"form-group","form-check"],["type","checkbox","id","ispublic-checkbox",1,"form-check-input",3,"disabled","checked"],["for","ispublic-checkbox",1,"form-check-label"],[1,"font-weight-bold"],[1,"dataSources"],["class","card p-3 flex-row align-items-center data-source",3,"disabled","active","inactive","mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"card","p-3","flex-row","align-items-center","data-source",3,"mouseenter","mouseleave"],[1,"featured-content","d-flex","flex-grow-1","flex-wrap","flex-md-nowrap"],[1,"avatar-container","fixed-width"],[1,"avatar","large"],[3,"src"],[1,"content-container","flex-grow-1","align-items-center"],[1,""],[1,"t-style-three","title"],[4,"ngIf"],["class","t-style-four suffix",4,"ngIf"],["class","t-style-four suffix errorText",4,"ngIf"],["class","t-style-four suffix errorLink text-info",4,"ngIf"],[1,"icon-container","d-flex","align-items-center","flex-grow-1","flex-md-grow-0"],[1,"btn","btn-sm","dSource","flex-grow-1","flex-md-grow-0",3,"disabled","click"],[1,"t-style-four","suffix"],[1,"t-style-four","suffix","errorText"],[1,"text-info",3,"href"],["aria-hidden","true",1,"fa","fa-info-circle"],[1,"t-style-four","suffix","errorLink","text-info"],["class","text-info",3,"href",4,"ngIf"],["class","text-info",4,"ngIf"],[1,"text-info"],["aria-hidden","true",1,"fa","fa-exclamation-triangle"],["target","_blank",3,"href"],["aria-hidden","true",1,"fa","fa-paperclip"]],template:function(e,t){1&e&&(h.\u0275\u0275elementStart(0,"div",0),h.\u0275\u0275elementStart(1,"div",1),h.\u0275\u0275elementStart(2,"div",2),h.\u0275\u0275elementStart(3,"section"),h.\u0275\u0275elementStart(4,"div",3),h.\u0275\u0275elementStart(5,"div",4),h.\u0275\u0275text(6),h.\u0275\u0275pipe(7,"translate"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(8,"div",5),h.\u0275\u0275text(9),h.\u0275\u0275pipe(10,"translate"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(11,"div",1),h.\u0275\u0275elementStart(12,"div",2),h.\u0275\u0275elementStart(13,"div",6),h.\u0275\u0275elementStart(14,"label"),h.\u0275\u0275text(15),h.\u0275\u0275pipe(16,"translate"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(17,"input",7),h.\u0275\u0275listener("ngModelChange",(function(e){return t.createChartModel.name=e})),h.\u0275\u0275pipe(18,"async"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(19,"div",8),h.\u0275\u0275element(20,"input",9),h.\u0275\u0275pipe(21,"async"),h.\u0275\u0275elementStart(22,"label",10),h.\u0275\u0275elementStart(23,"span",11),h.\u0275\u0275text(24),h.\u0275\u0275pipe(25,"translate"),h.\u0275\u0275elementEnd(),h.\u0275\u0275text(26),h.\u0275\u0275pipe(27,"translate"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(28,"div",3),h.\u0275\u0275elementStart(29,"div",4),h.\u0275\u0275text(30),h.\u0275\u0275pipe(31,"translate"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(32,"div",5),h.\u0275\u0275text(33),h.\u0275\u0275pipe(34,"translate"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(35,"div",12),h.\u0275\u0275template(36,k,21,28,"div",13),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementEnd()),2&e&&(h.\u0275\u0275advance(6),h.\u0275\u0275textInterpolate1(" ",h.\u0275\u0275pipeBind2(7,13,t.Resources.CreateChartStrings.TXT.Title2,t.locale.language)," "),h.\u0275\u0275advance(3),h.\u0275\u0275textInterpolate(h.\u0275\u0275pipeBind2(10,16,t.Resources.CreateChartStrings.TXT.TitleDesc,t.locale.language)),h.\u0275\u0275advance(6),h.\u0275\u0275textInterpolate(h.\u0275\u0275pipeBind2(16,19,t.Resources.CreateChartStrings.TXT.ChartName,t.locale.language)),h.\u0275\u0275advance(2),h.\u0275\u0275property("disabled",h.\u0275\u0275pipeBind1(18,22,t.isCreating$))("ngModel",t.createChartModel.name)("placeholder",t.createChartModel.placeholder),h.\u0275\u0275advance(3),h.\u0275\u0275property("disabled",h.\u0275\u0275pipeBind1(21,24,t.isCreating$))("checked",t.createChartModel.isPublic),h.\u0275\u0275advance(4),h.\u0275\u0275textInterpolate(h.\u0275\u0275pipeBind2(25,26,t.Resources.CreateChartStrings.TXT.Published,t.locale.language)),h.\u0275\u0275advance(2),h.\u0275\u0275textInterpolate1(" - ",h.\u0275\u0275pipeBind2(27,29,t.Resources.CreateChartStrings.TXT.PublishedDesc,t.locale.language),""),h.\u0275\u0275advance(4),h.\u0275\u0275textInterpolate1(" ",h.\u0275\u0275pipeBind2(31,32,t.Resources.CreateChartStrings.TXT.ChooseSource,t.locale.language)," "),h.\u0275\u0275advance(3),h.\u0275\u0275textInterpolate(h.\u0275\u0275pipeBind2(34,35,t.Resources.CreateChartStrings.TXT.ChooseDesc,t.locale.language)),h.\u0275\u0275advance(3),h.\u0275\u0275property("ngForOf",t.dataSources))},directives:[T.DefaultValueAccessor,T.NgControlStatus,T.NgModel,b.NgForOf,b.NgIf],pipes:[C.L10nTranslatePipe,b.AsyncPipe],styles:[""]})}).apply(t,a))||(e.exports=r)}}]);