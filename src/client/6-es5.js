function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],a=!0,r=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(a=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(s){r=!0,i=s}finally{try{a||null==c.return||c.return()}finally{if(r)throw i}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"4TXq":function(e,t,n){var a,r;a=[n,t,n("ofXK"),n("mpgD"),n("1ATV"),n("3Pt+"),n("kt0X"),n("S7BQ"),n("snw9"),n("cT7G"),n("cYii"),n("fXoL"),n("kt0X"),n("snw9")],void 0===(r=(function(e,t,n,a,r,i,o,c,s,l,u,d,p,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var g=function e(){_classCallCheck(this,e)};t.CreateModule=g,g.\u0275mod=d.\u0275\u0275defineNgModule({type:g}),g.\u0275inj=d.\u0275\u0275defineInjector({factory:function(e){return new(e||g)},providers:[u.CreateChartService],imports:[[i.FormsModule,r.L10nTranslationModule,n.CommonModule,a.CreateRoutingModule,o.StoreModule.forFeature(c.featureKey,c.reducer),s.EffectsModule.forFeature([l.CreateEffects])]]})}).apply(t,a))||(e.exports=r)},DGTN:function(e,t,n){var a,r;a=[n,t,n("kt0X")],void 0===(r=(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadDataSource=n.createAction("[Create] Load data source",n.props()),t.LoadDataSourceSuccess=n.createAction("[Create] Load data source success",n.props()),t.LoadDataSourceFailure=n.createAction("[Create] Load data source failure"),t.SaveSqlDataSource=n.createAction("[Create] Save SQL data source",n.props()),t.SaveSqlDataSourceSuccess=n.createAction("[Create] Save SQL data source success",n.props()),t.SaveSqlDataSourceFailure=n.createAction("[Create] Save SQL data source failure"),t.TestSqlConnection=n.createAction("[Create] Test sql connection",n.props()),t.TestSqlConnectionSuccess=n.createAction("[Create] Test sql connection success"),t.TestSqlConnectionFailure=n.createAction("[Create] Test sql connection failure"),t.ResetSaveStatus=n.createAction("[Create] Reset save status"),t.CreateChart=n.createAction("[Create] Create chart",n.props()),t.CreateChartSuccess=n.createAction("[Create] Create chart success",n.props()),t.CreateChartFailure=n.createAction("[Create] Create chart failure")}).apply(t,a))||(e.exports=r)},RPw7:function(e,t,n){var a;void 0===(a=(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.waadSourceDisabled={title:"CreateChartStrings.TXT.SourceTitleAD",desc:"CreateChartStrings.TXT.SourceDescAD",imageUrl:"/Images/ux/dataSources/WAAD.png",warning:"CreateChartStrings.ADWarning",warningLink:"/Tenant/SimpleConsent",errorLink:"/website/guides/aad-offline-error.cshtml",isEnabled:!1,type:5},t.waadSource={title:"CreateChartStrings.TXT.SourceTitleAD",desc:"CreateChartStrings.TXT.SourceDescAD",imageUrl:"/Images/ux/dataSources/WAAD.png",guideLink:"/website/guides/creating-from-aad.cshtml",guideLinkText:"View our Getting Started guide for Azure Active Directory",isEnabled:!0,type:5},t.upsSourceDisabled={title:"CreateChartStrings.TXT.SourceTitleUPS",desc:"CreateChartStrings.TXT.SourceDescUPS",imageUrl:"/Images/ux/dataSources/SharePointUPS.png",isSharePointWarning:!0,errorLink:"/website/guides/sharepoint-offline-error.cshtml",errorText:"Why am I seeing this error message and how do I resolve it?",isEnabled:!1,type:7},t.upsSource={title:"CreateChartStrings.TXT.SourceTitleUPS",desc:"CreateChartStrings.TXT.SourceDescUPS",imageUrl:"/Images/ux/dataSources/SharePointUPS.png",guideLink:"/website/guides/creating-from-ups.cshtml",guideLinkText:"View our Getting Started guide for SharePoint User Profile Service",isEnabled:!0,type:7},t.spListSourceDisabled={title:"CreateChartStrings.TXT.SourceTitleSPList",desc:"CreateChartStrings.TXT.SourceDescSPList",imageUrl:"/Images/ux/dataSources/SharePointList.png",isSharePointWarning:!0,errorLink:"/website/guides/sharepoint-offline-error.cshtml",errorText:"Why am I seeing this error message and how do I resolve it?",isEnabled:!1,type:6},t.spListSource={title:"CreateChartStrings.TXT.SourceTitleSPList",desc:"CreateChartStrings.TXT.SourceDescSPList",imageUrl:"/Images/ux/dataSources/SharePointList.png",guideLink:"/website/guides/creating-from-sharepoint-list.cshtml",guideLinkText:"View our Getting Started guide for SharePoint List",isEnabled:!0,type:6},t.sqlSource={title:"CreateChartStrings.TXT.SourceTitleSQL",desc:"CreateChartStrings.TXT.SourceDescSQL",imageUrl:"/Images/ux/dataSources/SQLServer.png",guideLink:"/website/guides/creating-from-database.cshtml",guideLinkText:"View our Getting Started guide for the SQL server data source",isEnabled:!0,type:2},t.excelSource={title:"CreateChartStrings.TXT.SourceTitleExcel",desc:"CreateChartStrings.TXT.SourceDescExcel",imageUrl:"/Images/ux/dataSources/Excel.png",isEnabled:!0,type:13},t.manualSource={title:"CreateChartStrings.TXT.SourceTitleManual",desc:"CreateChartStrings.TXT.SourceDescManual",imageUrl:"/Images/ux/dataSources/manualChart.png",guideLink:"/website/guides/manually-drawing-an-orgchart.cshtml",guideLinkText:"View our Getting Started guide for the Manual data source",isEnabled:!0,type:13},t.azureTableSource={title:"Azure Table",desc:"Create chart from Azure Table Storage",imageUrl:"/Images/ux/dataSources/AzureTable.png",guideLink:"/website/guides/creating-an-orgchart-from-azuretable.cshtml",guideLinkText:"View our guide for the Azure Table source",isEnabled:!0,type:12},t.demoSource={title:"CreateChartStrings.TXT.SourceTitleDemo",desc:"CreateChartStrings.TXT.SourceDescDemo",imageUrl:"/Images/ux/dataSources/demochart.png",isEnabled:!0,type:8}}).apply(t,[n,t]))||(e.exports=a)},S7BQ:function(e,t,n){var a,r;a=[n,t,n("kt0X"),n("DGTN")],void 0===(r=(function(e,t,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.featureKey="create",t.initialState={dataSource:null,isTestingConnection:!1,hasConnectionTestFailed:!1,hasConnectionTestSucceeded:!1,saveSqlSourceSuccess:!1,createdChart:null,isCreating:!1};var r=n.createReducer(t.initialState,n.on(a.LoadDataSourceSuccess,(function(e,t){return Object.assign(Object.assign({},e),{dataSource:t.dataSource,hasConnectionTestFailed:!1,hasConnectionTestSucceeded:!1})})),n.on(a.TestSqlConnection,(function(e){return Object.assign(Object.assign({},e),{isTestingConnection:!0})})),n.on(a.TestSqlConnectionSuccess,(function(e){return Object.assign(Object.assign({},e),{isTestingConnection:!0,hasConnectionTestFailed:!1,hasConnectionTestSucceeded:!0})})),n.on(a.TestSqlConnectionFailure,(function(e){return Object.assign(Object.assign({},e),{isTestingConnection:!0,hasConnectionTestFailed:!0,hasConnectionTestSucceeded:!1})})),n.on(a.SaveSqlDataSourceSuccess,(function(e){return Object.assign(Object.assign({},e),{saveSqlSourceSuccess:!0})})),n.on(a.CreateChart,(function(e){return Object.assign(Object.assign({},e),{isCreating:!0})})),n.on(a.CreateChartSuccess,(function(e,t){return Object.assign(Object.assign({},e),{createdChart:t})})),n.on(a.CreateChartFailure,(function(e){return Object.assign(Object.assign({},e),{isCreating:!1})})),n.on(a.ResetSaveStatus,(function(e){return Object.assign(Object.assign({},e),{saveSqlSourceSuccess:!1,createdChart:null,isCreating:!1})})));t.reducer=function(e,t){return r(e,t)},t.selectCreate=n.createFeatureSelector(t.featureKey),t.selectIsTestingConnection=n.createSelector(t.selectCreate,(function(e){return e.isTestingConnection})),t.selectDataSource=n.createSelector(t.selectCreate,(function(e){return e.dataSource})),t.selectHasConnectionTestFailed=n.createSelector(t.selectCreate,(function(e){return e.hasConnectionTestFailed})),t.selectHasConnectionTestSucceeded=n.createSelector(t.selectCreate,(function(e){return e.hasConnectionTestSucceeded})),t.selectSaveSqlSourceSuccess=n.createSelector(t.selectCreate,(function(e){return e.saveSqlSourceSuccess})),t.selectCreatedChart=n.createSelector(t.selectCreate,(function(e){return e.createdChart})),t.selectIsCreating=n.createSelector(t.selectCreate,(function(e){return e.isCreating}))}).apply(t,a))||(e.exports=r)},cT7G:function(e,t,n){var a,r;a=[n,t,n("snw9"),n("qCKp"),n("kU1M"),n("cYii"),n("DGTN"),n("DIoI"),n("fXoL"),n("snw9"),n("cYii")],void 0===(r=(function(e,t,n,a,r,i,o,c,s,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=function e(t,i){var s=this;_classCallCheck(this,e),this.actions$=t,this.createChartService=i,this.createChart$=n.createEffect((function(){return s.actions$.pipe(n.ofType(o.CreateChart),r.switchMap((function(e){return s.createChartService.createChart(e.model).pipe(r.map((function(e){return o.CreateChartSuccess(e)})))})),r.catchError((function(e){return a.of(o.CreateChartFailure())})))})),this.loadDataSource$=n.createEffect((function(){return s.actions$.pipe(n.ofType(o.LoadDataSource),r.switchMap((function(e){return s.createChartService.getDataSource(e.chartId).pipe(r.map((function(e){return o.LoadDataSourceSuccess({dataSource:e})})))})),r.catchError((function(e){return a.of(o.LoadDataSourceFailure())})))})),this.saveSqlDataSource$=n.createEffect((function(){return s.actions$.pipe(n.ofType(o.SaveSqlDataSource),r.switchMap((function(e){return s.createChartService.saveSqlDataSource(e.chartId,e.dataSource).pipe(r.mergeMap((function(e){return[o.SaveSqlDataSourceSuccess({dataSource:e}),new c.ToastSuccess("Data source saved.")]})))})),r.catchError((function(e){return a.of(o.SaveSqlDataSourceFailure()).pipe(r.mergeMap((function(e){return[e,new c.ToastError("Could not save data source.")]})))})))})),this.testSqlConnnection$=n.createEffect((function(){return s.actions$.pipe(n.ofType(o.TestSqlConnection),r.switchMap((function(e){return s.createChartService.testSqlConnection(e.dataSource).pipe(r.mergeMap((function(e){return"OK"===e?[o.TestSqlConnectionSuccess(),new c.ToastSuccess("Connection test succeeded.")]:[o.TestSqlConnectionFailure(),new c.ToastError("Connection test failed.")]})))})),r.catchError((function(e){return a.of(o.TestSqlConnectionFailure()).pipe(r.mergeMap((function(e){return[e,new c.ToastError("Connection test failed on the server.")]})))})))}))};t.CreateEffects=d,d.\u0275fac=function(e){return new(e||d)(s.\u0275\u0275inject(l.Actions),s.\u0275\u0275inject(u.CreateChartService))},d.\u0275prov=s.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac})}).apply(t,a))||(e.exports=r)},cYii:function(e,t,n){var a,r;a=[n,t,n("tk/3"),n("fXoL"),n("tk/3")],void 0===(r=(function(e,t,n,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t){_classCallCheck(this,e),this.http=t}return _createClass(e,[{key:"createChart",value:function(e){return this.http.post("/api/create/chart",e)}},{key:"getDataSource",value:function(e){return this.http.get("/api/create/sql/".concat(e))}},{key:"saveSqlDataSource",value:function(e,t){return this.http.post("/api/create/sql/".concat(e),t)}},{key:"testSqlConnection",value:function(e){return this.http.post("/api/testconnection",e)}}]),e}();t.CreateChartService=i,i.\u0275fac=function(e){return new(e||i)(a.\u0275\u0275inject(r.HttpClient))},i.\u0275prov=a.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}).apply(t,a))||(e.exports=r)},mpgD:function(e,t,n){var a,r;a=[n,t,n("tyNb"),n("vmo7"),n("qx2U"),n("fXoL"),n("tyNb")],void 0===(r=(function(e,t,n,a,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=[{path:"",component:a.CreateChartComponent},{path:"sql/:chartId",component:r.SqlSourceComponent}],s=function e(){_classCallCheck(this,e)};t.CreateRoutingModule=s,s.\u0275mod=i.\u0275\u0275defineNgModule({type:s}),s.\u0275inj=i.\u0275\u0275defineInjector({factory:function(e){return new(e||s)},imports:[[n.RouterModule.forChild(c)],n.RouterModule]})}).apply(t,a))||(e.exports=r)},qx2U:function(e,t,n){var a,r;a=[n,t,n("qCKp"),n("1ATV"),n("IGZg"),n("Z2nh"),n("S7BQ"),n("kt0X"),n("kU1M"),n("DGTN"),n("tyNb"),n("fXoL"),n("kt0X"),n("tyNb"),n("3Pt+"),n("ofXK"),n("1ATV")],void 0===(r=(function(e,t,n,a,r,i,o,c,s,l,u,d,p,S,g,f,h){"use strict";function m(e,t){1&e&&d.\u0275\u0275element(0,"div",21)}function C(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"div",22),d.\u0275\u0275text(1),d.\u0275\u0275pipe(2,"translate"),d.\u0275\u0275elementEnd()),2&e){var n=d.\u0275\u0275nextContext();d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind2(2,1,n.Resources.CreateChartStrings.SQL.ConnectionSuccess,n.locale.language)," ")}}Object.defineProperty(t,"__esModule",{value:!0});var v=function(e,t,n,a){return{"btn-info":e,"btn-danger":t,"btn-success":n,disabled:a}},b=function(){function e(t,a,u){var d=this;_classCallCheck(this,e),this.locale=t,this.store=a,this.router=u,this.Resources=i,this.model={ConnectionString:"",ParentColumn:"",PrimaryKeyColumn:"",SearchQuery:"",SelectQuery:""},this.connectionFail=!1,this.connectionSuccess=!1,this.unsubscribe=new n.Subject,this.chartId$=this.store.pipe(c.select(r.getChartId)),this.chartId$.pipe(s.takeUntil(this.unsubscribe),s.filter((function(e){return""!==e}))).subscribe((function(e){a.dispatch(l.LoadDataSource({chartId:e})),d.chartId=e})),this.dataSource$=this.store.pipe(c.select(o.selectDataSource)),this.dataSource$.pipe(s.takeUntil(this.unsubscribe)).subscribe((function(e){d.model=Object.assign({},e)})),this.hasConnectionTestFailed$=this.store.pipe(c.select(o.selectHasConnectionTestFailed)),this.hasConnectionTestSucceeded$=this.store.pipe(c.select(o.selectHasConnectionTestSucceeded)),this.store.pipe(c.select(o.selectSaveSqlSourceSuccess),s.takeUntil(this.unsubscribe),s.filter((function(e){return e})),s.withLatestFrom(this.chartId$)).subscribe((function(e){var t=_slicedToArray(e,2),n=(t[0],t[1]);d.router.navigate(["/chart",n]),d.store.dispatch(l.ResetSaveStatus())}))}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"testConnection",value:function(){this.store.dispatch(l.TestSqlConnection({dataSource:this.model}))}},{key:"save",value:function(){this.store.dispatch(l.SaveSqlDataSource({chartId:this.chartId,dataSource:this.model}))}},{key:"ngOnDestroy",value:function(){this.unsubscribe.next(),this.unsubscribe.complete()}}]),e}();t.SqlSourceComponent=b,b.\u0275fac=function(e){return new(e||b)(d.\u0275\u0275directiveInject(a.L10N_LOCALE),d.\u0275\u0275directiveInject(p.Store),d.\u0275\u0275directiveInject(S.Router))},b.\u0275cmp=d.\u0275\u0275defineComponent({type:b,selectors:[["toc-sql-source"]],decls:61,vars:61,consts:[[1,"container"],["name","sqlForm","novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"card"],[1,"section-heading"],[1,"suffix"],[1,"row","horizontal-form"],[1,"col-3"],[1,"col-9"],["type","text","required","","name","connectionString",1,"form-control",3,"ngModel","ngModelChange"],["type","text","required","","name","selectQuery",1,"form-control",3,"ngModel","ngModelChange"],["type","text","required","","name","primaryKey",1,"form-control",3,"ngModel","ngModelChange"],["type","text","required","","name","parentKey",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","searchQuery",1,"form-control",3,"ngModel","ngModelChange"],["class","form-group hidden alert alert-danger",4,"ngIf"],["class","form-group hidden alert alert-success",4,"ngIf"],[1,"row","pull-right"],[1,"col-12"],["type","submit",1,"btn",3,"ngClass","click"],["type","submit",1,"btn","btn-success"],[1,"clearfix"],[1,"form-group","hidden","alert","alert-danger"],[1,"form-group","hidden","alert","alert-success"]],template:function(e,t){if(1&e){var n=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"div",0),d.\u0275\u0275elementStart(1,"form",1,2),d.\u0275\u0275listener("ngSubmit",(function(e){return d.\u0275\u0275restoreView(n),d.\u0275\u0275reference(2).form.valid&&t.save()})),d.\u0275\u0275elementStart(3,"div",3),d.\u0275\u0275elementStart(4,"div",4),d.\u0275\u0275text(5),d.\u0275\u0275pipe(6,"translate"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(7,"div",5),d.\u0275\u0275text(8),d.\u0275\u0275pipe(9,"translate"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(10,"div",6),d.\u0275\u0275elementStart(11,"div",7),d.\u0275\u0275elementStart(12,"label"),d.\u0275\u0275text(13),d.\u0275\u0275pipe(14,"translate"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(15,"div",8),d.\u0275\u0275elementStart(16,"input",9),d.\u0275\u0275listener("ngModelChange",(function(e){return t.model.ConnectionString=e})),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(17,"div",6),d.\u0275\u0275elementStart(18,"div",7),d.\u0275\u0275elementStart(19,"label"),d.\u0275\u0275text(20),d.\u0275\u0275pipe(21,"translate"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(22,"div",8),d.\u0275\u0275elementStart(23,"input",10),d.\u0275\u0275listener("ngModelChange",(function(e){return t.model.SelectQuery=e})),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(24,"div",6),d.\u0275\u0275elementStart(25,"div",7),d.\u0275\u0275elementStart(26,"label"),d.\u0275\u0275text(27),d.\u0275\u0275pipe(28,"translate"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(29,"div",8),d.\u0275\u0275elementStart(30,"input",11),d.\u0275\u0275listener("ngModelChange",(function(e){return t.model.PrimaryKeyColumn=e})),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(31,"div",6),d.\u0275\u0275elementStart(32,"div",7),d.\u0275\u0275elementStart(33,"label"),d.\u0275\u0275text(34),d.\u0275\u0275pipe(35,"translate"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(36,"div",8),d.\u0275\u0275elementStart(37,"input",12),d.\u0275\u0275listener("ngModelChange",(function(e){return t.model.ParentColumn=e})),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(38,"div",6),d.\u0275\u0275elementStart(39,"div",7),d.\u0275\u0275elementStart(40,"label"),d.\u0275\u0275text(41),d.\u0275\u0275pipe(42,"translate"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(43,"div",8),d.\u0275\u0275elementStart(44,"input",13),d.\u0275\u0275listener("ngModelChange",(function(e){return t.model.SearchQuery=e})),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(45,m,1,0,"div",14),d.\u0275\u0275template(46,C,3,4,"div",15),d.\u0275\u0275elementStart(47,"div",16),d.\u0275\u0275elementStart(48,"div",17),d.\u0275\u0275elementStart(49,"button",18),d.\u0275\u0275listener("click",(function(e){return t.testConnection()})),d.\u0275\u0275pipe(50,"async"),d.\u0275\u0275pipe(51,"async"),d.\u0275\u0275pipe(52,"async"),d.\u0275\u0275pipe(53,"async"),d.\u0275\u0275pipe(54,"async"),d.\u0275\u0275text(55),d.\u0275\u0275pipe(56,"translate"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(57,"button",19),d.\u0275\u0275text(58),d.\u0275\u0275pipe(59,"translate"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275element(60,"div",20),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()}if(2&e){var a=d.\u0275\u0275reference(2);d.\u0275\u0275advance(1),d.\u0275\u0275classProp("submitted",a.submitted),d.\u0275\u0275advance(4),d.\u0275\u0275textInterpolate(d.\u0275\u0275pipeBind2(6,19,t.Resources.CreateChartStrings.SQL.Title2,t.locale.language)),d.\u0275\u0275advance(3),d.\u0275\u0275textInterpolate(d.\u0275\u0275pipeBind2(9,22,t.Resources.CreateChartStrings.SQL.TitleDesc,t.locale.language)),d.\u0275\u0275advance(5),d.\u0275\u0275textInterpolate(d.\u0275\u0275pipeBind2(14,25,t.Resources.Strings.TXT.ConnectionString,t.locale.language)),d.\u0275\u0275advance(3),d.\u0275\u0275property("ngModel",t.model.ConnectionString),d.\u0275\u0275advance(4),d.\u0275\u0275textInterpolate(d.\u0275\u0275pipeBind2(21,28,t.Resources.Strings.TXT.SELECTquery,t.locale.language)),d.\u0275\u0275advance(3),d.\u0275\u0275property("ngModel",t.model.SelectQuery),d.\u0275\u0275advance(4),d.\u0275\u0275textInterpolate(d.\u0275\u0275pipeBind2(28,31,t.Resources.Strings.TXT.PrimaryKeyColumn,t.locale.language)),d.\u0275\u0275advance(3),d.\u0275\u0275property("ngModel",t.model.PrimaryKeyColumn),d.\u0275\u0275advance(4),d.\u0275\u0275textInterpolate(d.\u0275\u0275pipeBind2(35,34,t.Resources.Strings.TXT.ParentColumn,t.locale.language)),d.\u0275\u0275advance(3),d.\u0275\u0275property("ngModel",t.model.ParentColumn),d.\u0275\u0275advance(4),d.\u0275\u0275textInterpolate(d.\u0275\u0275pipeBind2(42,37,t.Resources.Strings.TXT.SearchQuery,t.locale.language)),d.\u0275\u0275advance(3),d.\u0275\u0275property("ngModel",t.model.SearchQuery),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",t.connectionFail),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",t.connectionSuccess),d.\u0275\u0275advance(3),d.\u0275\u0275property("ngClass",d.\u0275\u0275pureFunction4(56,v,!d.\u0275\u0275pipeBind1(50,40,t.hasConnectionTestFailed$)&&!d.\u0275\u0275pipeBind1(51,42,t.hasConnectionTestSucceeded$),d.\u0275\u0275pipeBind1(52,44,t.hasConnectionTestFailed$),d.\u0275\u0275pipeBind1(53,46,t.hasConnectionTestSucceeded$),d.\u0275\u0275pipeBind1(54,48,t.isTestingConnection$))),d.\u0275\u0275advance(6),d.\u0275\u0275textInterpolate(d.\u0275\u0275pipeBind2(56,50,t.Resources.CreateChartStrings.SQL.TestConnection,t.locale.language)),d.\u0275\u0275advance(3),d.\u0275\u0275textInterpolate(d.\u0275\u0275pipeBind2(59,53,t.Resources.Strings.BUTTON.SAVE,t.locale.language))}},directives:[g.\u0275angular_packages_forms_forms_y,g.NgControlStatusGroup,g.NgForm,g.DefaultValueAccessor,g.RequiredValidator,g.NgControlStatus,g.NgModel,f.NgIf,f.NgClass],pipes:[h.L10nTranslatePipe,f.AsyncPipe],styles:["form.submitted[_ngcontent-%COMP%]   .ng-valid.required[_ngcontent-%COMP%], form.submitted[_ngcontent-%COMP%]   .ng-valid[required][_ngcontent-%COMP%]{border-left:5px solid #42a948}form.submitted[_ngcontent-%COMP%]   .ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}.ng-invalid[_ngcontent-%COMP%]:not(form){border:1px solid #ccc}.ng-invalid.ng-touched[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}"]})}).apply(t,a))||(e.exports=r)},vmo7:function(e,t,n){var a,r;a=[n,t,n("kt0X"),n("qCKp"),n("IGZg"),n("S7BQ"),n("Z2nh"),n("RPw7"),n("kU1M"),n("DGTN"),n("tyNb"),n("DIoI"),n("wdty"),n("8oAO"),n("1ATV"),n("fXoL"),n("kt0X"),n("1ATV"),n("tyNb"),n("8oAO"),n("3Pt+"),n("ofXK")],void 0===(r=(function(e,t,n,a,r,i,o,c,s,l,u,d,p,S,g,f,h,m,C,v,b,T){"use strict";function y(e,t){if(1&e&&(f.\u0275\u0275elementStart(0,"span"),f.\u0275\u0275text(1),f.\u0275\u0275pipe(2,"translate"),f.\u0275\u0275elementEnd()),2&e){var n=f.\u0275\u0275nextContext(2);f.\u0275\u0275advance(1),f.\u0275\u0275textInterpolate1(" ",f.\u0275\u0275pipeBind2(2,1,n.Resources.CreateChartStrings.TXT.NotEnabled,n.locale.language),"")}}function x(e,t){if(1&e&&(f.\u0275\u0275elementStart(0,"div",28),f.\u0275\u0275text(1),f.\u0275\u0275pipe(2,"translate"),f.\u0275\u0275elementEnd()),2&e){var n=f.\u0275\u0275nextContext().$implicit,a=f.\u0275\u0275nextContext();f.\u0275\u0275advance(1),f.\u0275\u0275textInterpolate1(" ",f.\u0275\u0275pipeBind2(2,1,n.desc,a.locale.language),"")}}function E(e,t){if(1&e&&(f.\u0275\u0275elementStart(0,"div",29),f.\u0275\u0275elementStart(1,"a",30),f.\u0275\u0275element(2,"i",31),f.\u0275\u0275text(3),f.\u0275\u0275pipe(4,"translate"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd()),2&e){var n=f.\u0275\u0275nextContext().$implicit,a=f.\u0275\u0275nextContext();f.\u0275\u0275advance(1),f.\u0275\u0275property("href",n.warningLink,f.\u0275\u0275sanitizeUrl),f.\u0275\u0275advance(2),f.\u0275\u0275textInterpolate1(" ",f.\u0275\u0275pipeBind2(4,2,n.warning,a.locale.language),"")}}function I(e,t){if(1&e&&(f.\u0275\u0275elementStart(0,"a",30),f.\u0275\u0275element(1,"i",31),f.\u0275\u0275text(2),f.\u0275\u0275pipe(3,"translate"),f.\u0275\u0275elementEnd()),2&e){var n=f.\u0275\u0275nextContext(3);f.\u0275\u0275property("href",null==n.preloadedData?null:n.preloadedData.sharePointRedirectLink,f.\u0275\u0275sanitizeUrl),f.\u0275\u0275advance(2),f.\u0275\u0275textInterpolate1(" ",f.\u0275\u0275pipeBind2(3,2,n.Resources.CreateChartStrings.SPWarning,n.locale.language),"")}}function w(e,t){if(1&e&&(f.\u0275\u0275elementStart(0,"span",35),f.\u0275\u0275element(1,"i",31),f.\u0275\u0275text(2),f.\u0275\u0275pipe(3,"translate"),f.\u0275\u0275elementEnd()),2&e){var n=f.\u0275\u0275nextContext(3);f.\u0275\u0275advance(2),f.\u0275\u0275textInterpolate1(" ",f.\u0275\u0275pipeBind2(3,1,n.Resources.CreateChartStrings.SPWarning,n.locale.language)," ")}}function k(e,t){if(1&e&&(f.\u0275\u0275elementStart(0,"div",32),f.\u0275\u0275template(1,I,4,5,"a",33),f.\u0275\u0275template(2,w,4,4,"span",34),f.\u0275\u0275elementEnd()),2&e){var n=f.\u0275\u0275nextContext(2);f.\u0275\u0275advance(1),f.\u0275\u0275property("ngIf",null==n.preloadedData?null:n.preloadedData.sharePointRedirectLink),f.\u0275\u0275advance(1),f.\u0275\u0275property("ngIf",!(null!=n.preloadedData&&n.preloadedData.sharePointRedirectLink))}}function L(e,t){if(1&e&&(f.\u0275\u0275elementStart(0,"p"),f.\u0275\u0275element(1,"i",36),f.\u0275\u0275elementStart(2,"a",37),f.\u0275\u0275text(3),f.\u0275\u0275pipe(4,"translate"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd()),2&e){var n=f.\u0275\u0275nextContext().$implicit,a=f.\u0275\u0275nextContext();f.\u0275\u0275advance(2),f.\u0275\u0275property("href",n.errorLink,f.\u0275\u0275sanitizeUrl),f.\u0275\u0275advance(1),f.\u0275\u0275textInterpolate1(" ",f.\u0275\u0275pipeBind2(4,2,a.Resources.CreateChartStrings.TXT.WhyAmISeeing,a.locale.language)," ")}}function M(e,t){if(1&e&&(f.\u0275\u0275elementStart(0,"p"),f.\u0275\u0275element(1,"i",38),f.\u0275\u0275elementStart(2,"a",37),f.\u0275\u0275text(3),f.\u0275\u0275pipe(4,"translate"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd()),2&e){var n=f.\u0275\u0275nextContext().$implicit,a=f.\u0275\u0275nextContext();f.\u0275\u0275advance(2),f.\u0275\u0275property("href",n.guideLink,f.\u0275\u0275sanitizeUrl),f.\u0275\u0275advance(1),f.\u0275\u0275textInterpolate1(" ",f.\u0275\u0275pipeBind2(4,2,n.guideLinkText,a.locale.language)," ")}}function D(e,t){if(1&e){var n=f.\u0275\u0275getCurrentView();f.\u0275\u0275elementStart(0,"div",14),f.\u0275\u0275listener("mouseenter",(function(e){f.\u0275\u0275restoreView(n);var a=t.index;return f.\u0275\u0275nextContext().onMouseEnter(e,a)}))("mouseleave",(function(e){return f.\u0275\u0275restoreView(n),f.\u0275\u0275nextContext().onMouseLeave()})),f.\u0275\u0275elementStart(1,"div",15),f.\u0275\u0275elementStart(2,"div",16),f.\u0275\u0275elementStart(3,"div",17),f.\u0275\u0275element(4,"img",18),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(5,"div",19),f.\u0275\u0275elementStart(6,"div",20),f.\u0275\u0275elementStart(7,"div",21),f.\u0275\u0275text(8),f.\u0275\u0275pipe(9,"translate"),f.\u0275\u0275template(10,y,3,4,"span",22),f.\u0275\u0275elementEnd(),f.\u0275\u0275template(11,x,3,4,"div",23),f.\u0275\u0275template(12,E,5,5,"div",24),f.\u0275\u0275template(13,k,3,2,"div",25),f.\u0275\u0275template(14,L,5,5,"p",22),f.\u0275\u0275template(15,M,5,5,"p",22),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(16,"div",26),f.\u0275\u0275elementStart(17,"button",27),f.\u0275\u0275listener("click",(function(e){f.\u0275\u0275restoreView(n);var a=t.$implicit;return f.\u0275\u0275nextContext().createChart(a.type)})),f.\u0275\u0275pipe(18,"async"),f.\u0275\u0275text(19),f.\u0275\u0275pipe(20,"translate"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd()}if(2&e){var a=t.$implicit,r=t.index,i=f.\u0275\u0275nextContext();f.\u0275\u0275classProp("disabled",!a.isEnabled)("active",a.isEnabled)("inactive",i.dataSourcesHighlight[r]),f.\u0275\u0275advance(4),f.\u0275\u0275property("src",a.imageUrl,f.\u0275\u0275sanitizeUrl),f.\u0275\u0275advance(4),f.\u0275\u0275textInterpolate(f.\u0275\u0275pipeBind2(9,20,a.title,i.locale.language)),f.\u0275\u0275advance(2),f.\u0275\u0275property("ngIf",!a.isEnabled),f.\u0275\u0275advance(1),f.\u0275\u0275property("ngIf",!a.warning&&!a.isSharePointWarning),f.\u0275\u0275advance(1),f.\u0275\u0275property("ngIf",a.warning),f.\u0275\u0275advance(1),f.\u0275\u0275property("ngIf",a.isSharePointWarning),f.\u0275\u0275advance(1),f.\u0275\u0275property("ngIf",a.errorLink),f.\u0275\u0275advance(1),f.\u0275\u0275property("ngIf",a.guideLink),f.\u0275\u0275advance(2),f.\u0275\u0275classProp("btn-success",a.isEnabled)("btn-default",!a.isEnabled),f.\u0275\u0275property("disabled",!a.isEnabled||f.\u0275\u0275pipeBind1(18,23,i.isCreating$)),f.\u0275\u0275advance(2),f.\u0275\u0275textInterpolate1("",f.\u0275\u0275pipeBind2(20,25,i.Resources.CreateChartStrings.BTN.ChooseThisSource,i.locale.language)," \xbb")}}Object.defineProperty(t,"__esModule",{value:!0});var P=function(){function e(t,u,S,g,f){var h=this;_classCallCheck(this,e),this.locale=t,this.store=u,this.translation=S,this.router=g,this.analytics=f,this.Resources=o,this.dataSources=[],this.dataSourcesHighlight=[],this.createChartModel={placeholder:"",isPublic:!0,name:""},this.placeholderName="Chart #{0}",this.unsubscribe=new a.Subject,this.analytics.send("Create chart",{}),a.combineLatest([this.translation.onChange(),this.store.select(r.getPreloadedData)]).pipe(s.takeUntil(this.unsubscribe)).subscribe((function(e){var t=_slicedToArray(e,2),n=(t[0],t[1]);h.placeholderName=h.translation.translate(o.CreateChartStrings.TXT.ChartNamePlaceholder),h.preloadedData=n;var a=[c.sqlSource,c.excelSource,c.manualSource,c.azureTableSource,c.demoSource];h.preloadedData.isSharePointOnline?(a.unshift(c.spListSource),a.unshift(c.upsSource)):(a.unshift(c.spListSourceDisabled),a.unshift(c.upsSourceDisabled)),a.unshift(h.preloadedData.isWAADTenant?c.waadSource:c.waadSourceDisabled),h.dataSources=a,h.dataSourcesHighlight=h.dataSources.map((function(e){return!1}));for(var r=function(e){var t=h.placeholderName.replace("{0}",String(e));if(-1===h.preloadedData.fullChartList.findIndex((function(e){return e.name===t})))return h.createChartModel=Object.assign(Object.assign({},h.createChartModel),{placeholder:t}),"break"},i=1;i<256;i++){if("break"===r(i))break}})),this.store.pipe(s.takeUntil(this.unsubscribe),n.select(i.selectCreatedChart),s.filter((function(e){return null!==e}))).subscribe((function(e){switch(h.store.dispatch(new p.InsertChartDescription(e)),e.dataSourceType){case 13:h.router.navigateByUrl("/chart/".concat(e.id,"?EditMode=1"));break;case 2:h.router.navigate(["/create/sql",e.id]);break;case 5:window.location.href="/PickTop/".concat(e.id,"?create=create");break;case 6:window.location.href="/sharepointlist/".concat(e.id);break;case 7:window.location.href="/PickTop/".concat(e.id,"?create=create");break;case 8:h.router.navigate(["/chart",e.id]);break;case 12:window.location.href="/CreateChart/AzureTable?OrgChartDefinitionId=".concat(e.id);break;default:h.store.dispatch(new d.ToastError("Unknown data source type"))}h.store.dispatch(l.ResetSaveStatus())})),this.isCreating$=u.pipe(n.select(i.selectIsCreating))}return _createClass(e,[{key:"ngOnInit",value:function(){console.log("on init"),this.store.dispatch(l.ResetSaveStatus())}},{key:"createChart",value:function(e){this.store.dispatch(l.CreateChart({model:{ChartName:this.createChartModel.name||this.createChartModel.placeholder,IsPublic:this.createChartModel.isPublic,DataSourceType:e}}))}},{key:"onMouseEnter",value:function(e,t){this.dataSourcesHighlight=this.dataSources.map((function(e,n){return n!==t}))}},{key:"onMouseLeave",value:function(){this.dataSourcesHighlight=this.dataSources.map((function(e){return!1}))}},{key:"ngOnDestroy",value:function(){this.unsubscribe.next(),this.unsubscribe.complete()}}]),e}();t.CreateChartComponent=P,P.\u0275fac=function(e){return new(e||P)(f.\u0275\u0275directiveInject(g.L10N_LOCALE),f.\u0275\u0275directiveInject(h.Store),f.\u0275\u0275directiveInject(m.L10nTranslationService),f.\u0275\u0275directiveInject(C.Router),f.\u0275\u0275directiveInject(v.AnalyticsService))},P.\u0275cmp=f.\u0275\u0275defineComponent({type:P,selectors:[["toc-create-chart"]],decls:37,vars:38,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"card"],[1,"section-heading"],[1,"suffix"],[1,"form-group"],["type","text","autocomplete","off",1,"form-control",3,"disabled","ngModel","placeholder","ngModelChange"],[1,"form-group","form-check"],["type","checkbox","id","ispublic-checkbox",1,"form-check-input",3,"disabled","checked"],["for","ispublic-checkbox",1,"form-check-label"],[1,"font-weight-bold"],[1,"dataSources"],["class","card p-3 flex-row align-items-center data-source",3,"disabled","active","inactive","mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"card","p-3","flex-row","align-items-center","data-source",3,"mouseenter","mouseleave"],[1,"featured-content","d-flex","flex-grow-1","flex-wrap","flex-md-nowrap"],[1,"avatar-container","fixed-width"],[1,"avatar","large"],[3,"src"],[1,"content-container","flex-grow-1","align-items-center"],[1,""],[1,"t-style-three","title"],[4,"ngIf"],["class","t-style-four suffix",4,"ngIf"],["class","t-style-four suffix errorText",4,"ngIf"],["class","t-style-four suffix errorLink text-info",4,"ngIf"],[1,"icon-container","d-flex","align-items-center","flex-grow-1","flex-md-grow-0"],[1,"btn","btn-sm","dSource","flex-grow-1","flex-md-grow-0",3,"disabled","click"],[1,"t-style-four","suffix"],[1,"t-style-four","suffix","errorText"],[1,"text-info",3,"href"],["aria-hidden","true",1,"fa","fa-info-circle"],[1,"t-style-four","suffix","errorLink","text-info"],["class","text-info",3,"href",4,"ngIf"],["class","text-info",4,"ngIf"],[1,"text-info"],["aria-hidden","true",1,"fa","fa-exclamation-triangle"],["target","_blank",3,"href"],["aria-hidden","true",1,"fa","fa-paperclip"]],template:function(e,t){1&e&&(f.\u0275\u0275elementStart(0,"div",0),f.\u0275\u0275elementStart(1,"div",1),f.\u0275\u0275elementStart(2,"div",2),f.\u0275\u0275elementStart(3,"section"),f.\u0275\u0275elementStart(4,"div",3),f.\u0275\u0275elementStart(5,"div",4),f.\u0275\u0275text(6),f.\u0275\u0275pipe(7,"translate"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(8,"div",5),f.\u0275\u0275text(9),f.\u0275\u0275pipe(10,"translate"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(11,"div",1),f.\u0275\u0275elementStart(12,"div",2),f.\u0275\u0275elementStart(13,"div",6),f.\u0275\u0275elementStart(14,"label"),f.\u0275\u0275text(15),f.\u0275\u0275pipe(16,"translate"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(17,"input",7),f.\u0275\u0275listener("ngModelChange",(function(e){return t.createChartModel.name=e})),f.\u0275\u0275pipe(18,"async"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(19,"div",8),f.\u0275\u0275element(20,"input",9),f.\u0275\u0275pipe(21,"async"),f.\u0275\u0275elementStart(22,"label",10),f.\u0275\u0275elementStart(23,"span",11),f.\u0275\u0275text(24),f.\u0275\u0275pipe(25,"translate"),f.\u0275\u0275elementEnd(),f.\u0275\u0275text(26),f.\u0275\u0275pipe(27,"translate"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(28,"div",3),f.\u0275\u0275elementStart(29,"div",4),f.\u0275\u0275text(30),f.\u0275\u0275pipe(31,"translate"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(32,"div",5),f.\u0275\u0275text(33),f.\u0275\u0275pipe(34,"translate"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(35,"div",12),f.\u0275\u0275template(36,D,21,28,"div",13),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd()),2&e&&(f.\u0275\u0275advance(6),f.\u0275\u0275textInterpolate1(" ",f.\u0275\u0275pipeBind2(7,13,t.Resources.CreateChartStrings.TXT.Title2,t.locale.language)," "),f.\u0275\u0275advance(3),f.\u0275\u0275textInterpolate(f.\u0275\u0275pipeBind2(10,16,t.Resources.CreateChartStrings.TXT.TitleDesc,t.locale.language)),f.\u0275\u0275advance(6),f.\u0275\u0275textInterpolate(f.\u0275\u0275pipeBind2(16,19,t.Resources.CreateChartStrings.TXT.ChartName,t.locale.language)),f.\u0275\u0275advance(2),f.\u0275\u0275property("disabled",f.\u0275\u0275pipeBind1(18,22,t.isCreating$))("ngModel",t.createChartModel.name)("placeholder",t.createChartModel.placeholder),f.\u0275\u0275advance(3),f.\u0275\u0275property("disabled",f.\u0275\u0275pipeBind1(21,24,t.isCreating$))("checked",t.createChartModel.isPublic),f.\u0275\u0275advance(4),f.\u0275\u0275textInterpolate(f.\u0275\u0275pipeBind2(25,26,t.Resources.CreateChartStrings.TXT.Published,t.locale.language)),f.\u0275\u0275advance(2),f.\u0275\u0275textInterpolate1(" - ",f.\u0275\u0275pipeBind2(27,29,t.Resources.CreateChartStrings.TXT.PublishedDesc,t.locale.language),""),f.\u0275\u0275advance(4),f.\u0275\u0275textInterpolate1(" ",f.\u0275\u0275pipeBind2(31,32,t.Resources.CreateChartStrings.TXT.ChooseSource,t.locale.language)," "),f.\u0275\u0275advance(3),f.\u0275\u0275textInterpolate(f.\u0275\u0275pipeBind2(34,35,t.Resources.CreateChartStrings.TXT.ChooseDesc,t.locale.language)),f.\u0275\u0275advance(3),f.\u0275\u0275property("ngForOf",t.dataSources))},directives:[b.DefaultValueAccessor,b.NgControlStatus,b.NgModel,T.NgForOf,T.NgIf],pipes:[m.L10nTranslatePipe,T.AsyncPipe],styles:[""]})}).apply(t,a))||(e.exports=r)}}]);